{% extends "base.html" %}

{% block title %}Coach Onboarding - Step 3 - Skileez{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-8">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Progress Bar -->
        <div class="mb-8">
            <div class="flex items-center justify-between text-sm text-gray-600 mb-2">
                <span>Step {{ step }} of 9</span>
                <span>{{ ((step-1)/8*100)|round|int }}% Complete</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: {{ ((step-1)/8*100)|round|int }}%"></div>
            </div>
        </div>
        
        <!-- Step Navigation -->
        <div class="flex items-center justify-between mb-8">
            {% for i in range(1, 10) %}
            <div class="flex items-center">
                <a href="{{ url_for('coach_onboarding', step=i) }}" class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold transition-all duration-200 {% if i == step %}bg-primary-600 text-white cursor-default{% elif i < step %}bg-green-500 text-white hover:bg-green-600 cursor-pointer{% else %}bg-gray-200 text-gray-500 cursor-not-allowed{% endif %}" {% if i > step %}onclick="return false;"{% endif %}>
                    {% if i < step %}
                        <i data-feather="check" class="w-4 h-4"></i>
                    {% else %}
                        {{ i }}
                    {% endif %}
                </a>
                {% if i < 9 %}
                <div class="w-8 h-1 bg-gray-200 mx-2">
                    <div class="h-1 {% if i < step %}bg-green-500{% else %}bg-gray-200{% endif %} transition-all duration-300"></div>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        
        <!-- Main Content -->
        <div class="premium-card p-8">
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i data-feather="briefcase" class="w-8 h-8 text-primary-600"></i>
                </div>
                <h2 class="text-3xl font-bold text-gray-900 mb-2">Add your experience</h2>
                <p class="text-gray-600">Share your work experience to build credibility. This step is optional but recommended.</p>
            </div>
            
            <form method="POST" class="space-y-6">
                {{ form.hidden_tag() }}
                
                <!-- Experience Form -->
                <div class="space-y-4">
                    <div>
                        {{ form.title.label(class="block text-sm font-medium text-gray-700 mb-2") }}
                        {{ form.title(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors", placeholder="e.g., Senior Digital Marketing Manager") }}
                        {% if form.title.errors %}
                            <div class="mt-1 text-sm text-red-600">
                                {% for error in form.title.errors %}
                                    <p>{{ error }}</p>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    
                    <div>
                        {{ form.company.label(class="block text-sm font-medium text-gray-700 mb-2") }}
                        {{ form.company(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors", placeholder="e.g., TechCorp Inc.") }}
                        {% if form.company.errors %}
                            <div class="mt-1 text-sm text-red-600">
                                {% for error in form.company.errors %}
                                    <p>{{ error }}</p>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    
                    <div>
                        {{ form.description.label(class="block text-sm font-medium text-gray-700 mb-2") }}
                        {{ form.description(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors resize-none", rows="3", placeholder="Describe your key responsibilities and achievements...") }}
                        {% if form.description.errors %}
                            <div class="mt-1 text-sm text-red-600">
                                {% for error in form.description.errors %}
                                    <p>{{ error }}</p>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            {{ form.start_date.label(class="block text-sm font-medium text-gray-700 mb-2") }}
                            {{ form.start_date(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors") }}
                            {% if form.start_date.errors %}
                                <div class="mt-1 text-sm text-red-600">
                                    {% for error in form.start_date.errors %}
                                        <p>{{ error }}</p>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        
                        <div>
                            {{ form.end_date.label(class="block text-sm font-medium text-gray-700 mb-2") }}
                            {{ form.end_date(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors", id="end-date") }}
                            {% if form.end_date.errors %}
                                <div class="mt-1 text-sm text-red-600">
                                    {% for error in form.end_date.errors %}
                                        <p>{{ error }}</p>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="flex items-center">
                        {{ form.is_current(class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded", id="is-current") }}
                        {{ form.is_current.label(class="ml-2 block text-sm text-gray-700") }}
                    </div>
                </div>
                
                <!-- Skip Option -->
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                    <p class="text-sm text-gray-600 mb-2">
                        <i data-feather="info" class="w-4 h-4 inline mr-1"></i>
                        This step is optional. You can add experience later or skip if you prefer.
                    </p>
                    <p class="text-xs text-gray-500">
                        Adding experience helps students trust your expertise and can lead to more opportunities.
                    </p>
                </div>
                
                <!-- Navigation Buttons -->
                <div class="flex justify-between pt-8 border-t border-gray-200">
                    <a href="{{ url_for('coach_onboarding', step=2) }}" class="btn-secondary px-6 py-3 rounded-lg transition-all duration-200">
                        <i data-feather="arrow-left" class="w-4 h-4 mr-2"></i>
                        Back
                    </a>
                    
                    <div class="flex space-x-3">
                        <button type="submit" name="skip" class="border-2 border-gray-300 text-gray-600 px-6 py-3 rounded-lg font-semibold hover:border-gray-400 transition-all duration-200">
                            Skip for now
                        </button>
                        <button type="submit" class="btn-primary px-6 py-3 rounded-lg transition-all duration-200">
                            Next Step
                            <i data-feather="arrow-right" class="w-4 h-4 ml-2"></i>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const isCurrentCheckbox = document.getElementById('is-current');
    const endDateInput = document.getElementById('end-date');
    
    isCurrentCheckbox.addEventListener('change', function() {
        if (this.checked) {
            endDateInput.disabled = true;
            endDateInput.value = '';
            endDateInput.classList.add('bg-gray-100');
        } else {
            endDateInput.disabled = false;
            endDateInput.classList.remove('bg-gray-100');
        }
    });
    
    // Initialize state
    if (isCurrentCheckbox.checked) {
        endDateInput.disabled = true;
        endDateInput.classList.add('bg-gray-100');
    }
});
</script>
{% endblock %}
