{% extends "base.html" %}

{% block title %}Payment Successful - Contract #{{ contract.contract_number }}{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Success Header -->
                       <div class="text-center mb-8">
                   <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                       <i data-feather="check" class="w-10 h-10 text-green-600"></i>
                   </div>
                   <h1 class="text-3xl font-bold text-gray-900 mb-2">Test Payment Successful!</h1>
                   <p class="text-lg text-gray-600">Your contract is now active and ready for sessions</p>
                   <div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg inline-block">
                       <div class="flex items-center">
                           <i data-feather="alert-triangle" class="w-5 h-5 text-yellow-600 mr-2"></i>
                           <span class="text-sm font-medium text-yellow-800">TEST MODE</span>
                       </div>
                       <p class="text-sm text-yellow-700 mt-1">This was a test payment. No real charges were made.</p>
                   </div>
               </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Contract Details -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
                <div class="bg-gradient-to-r from-green-600 to-blue-600 px-6 py-4">
                    <h2 class="text-xl font-bold text-white flex items-center">
                        <i data-feather="file-text" class="w-5 h-5 mr-3"></i>
                        Contract Details
                    </h2>
                </div>
                
                <div class="p-6">
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Contract Number:</span>
                            <span class="font-semibold text-gray-900">#{{ contract.contract_number }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Learning Request:</span>
                            <span class="font-semibold text-gray-900">{{ contract.proposal.learning_request.title }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Coach:</span>
                            <span class="font-semibold text-gray-900">{{ contract.coach.first_name }} {{ contract.coach.last_name }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Total Sessions:</span>
                            <span class="font-semibold text-gray-900">{{ contract.total_sessions }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Rate per Session:</span>
                            <span class="font-semibold text-gray-900">${{ "%.2f"|format(contract.rate) }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Total Amount Paid:</span>
                            <span class="font-semibold text-green-600">${{ "%.2f"|format(contract.get_payment_amount()) }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Payment Date:</span>
                            <span class="font-semibold text-gray-900">{{ contract.payment_date.strftime('%B %d, %Y at %I:%M %p') if contract.payment_date else 'Recently' }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Status:</span>
                            <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">Active</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Next Steps -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
                <div class="bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-4">
                    <h2 class="text-xl font-bold text-white flex items-center">
                        <i data-feather="play" class="w-5 h-5 mr-3"></i>
                        Next Steps
                    </h2>
                </div>
                
                <div class="p-6">
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-4 mt-1">
                                <span class="text-blue-600 text-sm font-bold">1</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900">Schedule Your First Session</h3>
                                <p class="text-sm text-gray-600 mt-1">Work with your coach to schedule your first learning session</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-4 mt-1">
                                <span class="text-green-600 text-sm font-bold">2</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900">Prepare for Your Session</h3>
                                <p class="text-sm text-gray-600 mt-1">Review your learning goals and prepare any questions</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-4 mt-1">
                                <span class="text-purple-600 text-sm font-bold">3</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900">Start Learning</h3>
                                <p class="text-sm text-gray-600 mt-1">Begin your learning journey with your expert coach</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center mr-4 mt-1">
                                <span class="text-orange-600 text-sm font-bold">4</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900">Track Progress</h3>
                                <p class="text-sm text-gray-600 mt-1">Monitor your progress and complete your learning goals</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center">
            <a href="{{ url_for('manage_sessions', contract_id=contract.id) }}" 
               class="px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center">
                <i data-feather="calendar" class="w-4 h-4 mr-2"></i>
                Schedule Sessions
            </a>
            
            <a href="{{ url_for('conversation', user_id=contract.coach_id) }}" 
               class="px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center justify-center">
                <i data-feather="message-circle" class="w-4 h-4 mr-2"></i>
                Message Coach
            </a>
            
            <a href="{{ url_for('view_contract', contract_id=contract.id) }}" 
               class="px-6 py-3 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition-colors flex items-center justify-center">
                <i data-feather="file-text" class="w-4 h-4 mr-2"></i>
                View Contract
            </a>
        </div>

        <!-- Receipt Info -->
        <div class="mt-8 bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
            <div class="bg-gradient-to-r from-gray-600 to-gray-700 px-6 py-4">
                <h2 class="text-xl font-bold text-white flex items-center">
                    <i data-feather="receipt" class="w-5 h-5 mr-3"></i>
                    Test Payment Receipt
                </h2>
            </div>
            
            <div class="p-6">
                <div class="text-center">
                    <p class="text-gray-600 mb-4">This was a test payment. No real charges were made.</p>
                    <div class="flex items-center justify-center space-x-4 text-sm text-gray-500">
                        <span class="flex items-center">
                            <i data-feather="clock" class="w-4 h-4 mr-1"></i>
                            {{ contract.payment_date.strftime('%B %d, %Y at %I:%M %p') if contract.payment_date else 'Recently' }}
                        </span>
                        <span class="flex items-center">
                            <i data-feather="alert-triangle" class="w-4 h-4 mr-1"></i>
                            Test Mode
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
