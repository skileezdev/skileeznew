{% extends "base.html" %}

{% block title %}Payment Cancelled - Contract #{{ contract.contract_number }}{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Cancel Header -->
        <div class="text-center mb-8">
            <div class="w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-feather="x" class="w-10 h-10 text-orange-600"></i>
            </div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Payment Cancelled</h1>
            <p class="text-lg text-gray-600">Your payment was not completed. Your contract is still pending payment.</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Contract Status -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
                <div class="bg-gradient-to-r from-orange-600 to-red-600 px-6 py-4">
                    <h2 class="text-xl font-bold text-white flex items-center">
                        <i data-feather="alert-circle" class="w-5 h-5 mr-3"></i>
                        Contract Status
                    </h2>
                </div>
                
                <div class="p-6">
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Contract Number:</span>
                            <span class="font-semibold text-gray-900">#{{ contract.contract_number }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Learning Request:</span>
                            <span class="font-semibold text-gray-900">{{ contract.proposal.learning_request.title }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Coach:</span>
                            <span class="font-semibold text-gray-900">{{ contract.coach.first_name }} {{ contract.coach.last_name }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Total Amount:</span>
                            <span class="font-semibold text-gray-900">${{ "%.2f"|format(contract.get_payment_amount()) }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Payment Status:</span>
                            <span class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium">Pending Payment</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Contract Status:</span>
                            <span class="px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium">Inactive</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- What This Means -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
                <div class="bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4">
                    <h2 class="text-xl font-bold text-white flex items-center">
                        <i data-feather="info" class="w-5 h-5 mr-3"></i>
                        What This Means
                    </h2>
                </div>
                
                <div class="p-6">
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <i data-feather="clock" class="w-5 h-5 text-orange-600 mr-3 mt-0.5"></i>
                            <div>
                                <h3 class="font-semibold text-gray-900">Contract Not Active</h3>
                                <p class="text-sm text-gray-600 mt-1">Your contract is waiting for payment to be completed</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <i data-feather="calendar" class="w-5 h-5 text-red-600 mr-3 mt-0.5"></i>
                            <div>
                                <h3 class="font-semibold text-gray-900">Sessions Not Available</h3>
                                <p class="text-sm text-gray-600 mt-1">You cannot schedule sessions until payment is completed</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <i data-feather="refresh-cw" class="w-5 h-5 text-blue-600 mr-3 mt-0.5"></i>
                            <div>
                                <h3 class="font-semibold text-gray-900">Try Again</h3>
                                <p class="text-sm text-gray-600 mt-1">You can attempt payment again at any time</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <i data-feather="message-circle" class="w-5 h-5 text-green-600 mr-3 mt-0.5"></i>
                            <div>
                                <h3 class="font-semibold text-gray-900">Contact Support</h3>
                                <p class="text-sm text-gray-600 mt-1">If you're having issues, contact our support team</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center">
            <a href="{{ url_for('contract_payment', contract_id=contract.id) }}" 
               class="px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center">
                <i data-feather="credit-card" class="w-4 h-4 mr-2"></i>
                Try Payment Again
            </a>
            
            <a href="{{ url_for('view_contract', contract_id=contract.id) }}" 
               class="px-6 py-3 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition-colors flex items-center justify-center">
                <i data-feather="file-text" class="w-4 h-4 mr-2"></i>
                View Contract
            </a>
            
            <a href="{{ url_for('conversation', user_id=contract.coach_id) }}" 
               class="px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center justify-center">
                <i data-feather="message-circle" class="w-4 h-4 mr-2"></i>
                Message Coach
            </a>
        </div>

        <!-- Help Section -->
        <div class="mt-8 bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
            <div class="bg-gradient-to-r from-gray-600 to-gray-700 px-6 py-4">
                <h2 class="text-xl font-bold text-white flex items-center">
                    <i data-feather="help-circle" class="w-5 h-5 mr-3"></i>
                    Need Help?
                </h2>
            </div>
            
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-2">Common Issues</h3>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li class="flex items-start">
                                <i data-feather="check" class="w-4 h-4 text-green-600 mr-2 mt-0.5"></i>
                                Insufficient funds in your account
                            </li>
                            <li class="flex items-start">
                                <i data-feather="check" class="w-4 h-4 text-green-600 mr-2 mt-0.5"></i>
                                Card declined by your bank
                            </li>
                            <li class="flex items-start">
                                <i data-feather="check" class="w-4 h-4 text-green-600 mr-2 mt-0.5"></i>
                                Browser or network issues
                            </li>
                            <li class="flex items-start">
                                <i data-feather="check" class="w-4 h-4 text-green-600 mr-2 mt-0.5"></i>
                                Payment method not supported
                            </li>
                        </ul>
                    </div>
                    
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-2">Solutions</h3>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li class="flex items-start">
                                <i data-feather="arrow-right" class="w-4 h-4 text-blue-600 mr-2 mt-0.5"></i>
                                Try a different payment method
                            </li>
                            <li class="flex items-start">
                                <i data-feather="arrow-right" class="w-4 h-4 text-blue-600 mr-2 mt-0.5"></i>
                                Check with your bank about the transaction
                            </li>
                            <li class="flex items-start">
                                <i data-feather="arrow-right" class="w-4 h-4 text-blue-600 mr-2 mt-0.5"></i>
                                Clear browser cache and try again
                            </li>
                            <li class="flex items-start">
                                <i data-feather="arrow-right" class="w-4 h-4 text-blue-600 mr-2 mt-0.5"></i>
                                Contact our support team for assistance
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-6 text-center">
                    <p class="text-gray-600 mb-4">Still having trouble? Our support team is here to help!</p>
                    <a href="mailto:support@skileez.com" 
                       class="inline-flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors">
                        <i data-feather="mail" class="w-4 h-4 mr-2"></i>
                        Contact Support
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
